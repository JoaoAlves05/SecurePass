<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SecurePass</title>
  <link rel="stylesheet" href="popup.css" />
</head>

<body>
  <div class="app-container">
    <header class="app-header">
      <div class="brand-section">
        <div class="logo-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
            stroke-linejoin="round">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
          </svg>
        </div>
        <h1>SecurePass</h1>
      </div>
      <div class="header-controls">
        <button id="themeToggle" class="icon-btn" type="button" aria-label="Toggle theme"></button>
        <button id="openSettings" class="icon-btn" type="button" aria-label="Open settings">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
            stroke-linejoin="round">
            <circle cx="12" cy="12" r="3"></circle>
            <path
              d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.08.08a2 2 0 0 1-2.83 2.83l-.08-.08A1.65 1.65 0 0 0 15 19.4a1.65 1.65 0 0 0-1 .33 1.65 1.65 0 0 0-.83 1.49V22a2 2 0 0 1-4 0v-.78a1.65 1.65 0 0 0-.83-1.49 1.65 1.65 0 0 0-1-.33 1.65 1.65 0 0 0-1.82.33l-.08.08a2 2 0 1 1-2.83-2.83l.08-.08A1.65 1.65 0 0 0 4.6 15a1.65 1.65 0 0 0-.33-1 1.65 1.65 0 0 0-1.49-.83H2a2 2 0 0 1 0-4h.78a1.65 1.65 0 0 0 1.49-.83 1.65 1.65 0 0 0 .33-1 1.65 1.65 0 0 0-.33-1.82l-.08-.08a2 2 0 0 1 2.83-2.83l.08.08A1.65 1.65 0 0 0 9 4.6a1.65 1.65 0 0 0 1-.33 1.65 1.65 0 0 0 .83-1.49V2a2 2 0 0 1 4 0v.78a1.65 1.65 0 0 0 .83 1.49 1.65 1.65 0 0 0 1 .33 1.65 1.65 0 0 0 1.82-.33l.08-.08a2 2 0 1 1 2.83 2.83l-.08.08A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 .33 1 1.65 1.65 0 0 0 1.49.83H22a2 2 0 0 1 0 4h-.78a1.65 1.65 0 0 0-1.49.83 1.65 1.65 0 0 0-.33 1Z">
            </path>
          </svg>
        </button>
      </div>
    </header>

    <nav class="main-nav" role="tablist">
      <button id="tab-tester" class="nav-item active" role="tab" aria-selected="true" data-view="tester">
        Tester
      </button>
      <button id="tab-generator" class="nav-item" role="tab" aria-selected="false" data-view="generator">
        Generator
      </button>
      <button id="tab-vault" class="nav-item" role="tab" aria-selected="false" data-view="vault">
        Vault
      </button>
    </nav>

    <main class="content-area">
      <section id="view-tester" class="view active" role="tabpanel" aria-labelledby="tab-tester">
        <div class="panel">
          <div class="hero-section">
            <h2>Check your password strength</h2>
            <p class="subtitle">Enter a password to analyze its entropy and exposure.</p>
          </div>

          <div class="password-field-container">
            <div class="input-group">
              <input type="password" id="passwordInput" placeholder="Type a password..." autocomplete="off" />
              <div class="input-actions">
                <button id="togglePassword" class="icon-btn" type="button" aria-label="Show password"></button>
                <button id="copyTestPassword" class="icon-btn" type="button" aria-label="Copy password"></button>
              </div>
            </div>

            <div class="strength-indicator">
              <div class="strength-header">
                <span id="strengthVerdict" class="verdict-badge">Weak</span>
                <span class="strength-meta">
                  <span id="entropy">0 bits</span> &bull; <span id="crackTime">Instant</span>
                </span>
              </div>
              <div class="progress-track">
                <div id="strengthBar" class="progress-fill"></div>
              </div>
            </div>
          </div>

          <div class="action-row">
            <button id="checkHibp" type="button" class="btn btn-outline">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
              </svg>
              Check for breaches
            </button>
            <button id="saveTested" type="button" class="btn btn-ghost">Save to vault</button>
          </div>

          <div id="tipsContent" class="insights-panel hidden">
            <h3>Suggestions</h3>
            <ul id="suggestionsList" class="suggestions-list"></ul>
            <p id="suggestionsEmpty" class="empty-text hidden">Great password! No suggestions.</p>
          </div>

          <div class="hibp-result hidden" id="hibpResult">
            <div class="hibp-icon"></div>
            <div class="hibp-content">
              <h4>Breach Report</h4>
              <p id="hibpStatus">Not checked yet.</p>
            </div>
          </div>
        </div>
      </section>

      <section id="view-generator" class="view" role="tabpanel" aria-labelledby="tab-generator">
        <div class="panel">
          <div class="generator-controls">
            <div class="control-group">
              <div class="control-header">
                <label for="lengthRange">Length</label>
                <span id="lengthValue" class="value-badge">16</span>
              </div>
              <input type="range" id="lengthRange" class="range-slider" min="6" max="64" value="16" />
            </div>

            <div class="options-grid">
              <label class="checkbox-card">
                <input type="checkbox" id="includeUpper" checked />
                <div class="checkbox-content">
                  <span class="checkbox-label">ABC</span>
                  <span class="checkbox-sub">Uppercase</span>
                </div>
              </label>

              <label class="checkbox-card">
                <input type="checkbox" id="includeLower" checked />
                <div class="checkbox-content">
                  <span class="checkbox-label">abc</span>
                  <span class="checkbox-sub">Lowercase</span>
                </div>
              </label>

              <label class="checkbox-card">
                <input type="checkbox" id="includeNumbers" checked />
                <div class="checkbox-content">
                  <span class="checkbox-label">123</span>
                  <span class="checkbox-sub">Numbers</span>
                </div>
              </label>

              <label class="checkbox-card">
                <input type="checkbox" id="includeSymbols" checked />
                <div class="checkbox-content">
                  <span class="checkbox-label">#$&</span>
                  <span class="checkbox-sub">Symbols</span>
                </div>
              </label>
            </div>

            <label class="checkbox-row">
              <input type="checkbox" id="avoidSimilar" />
              <span>Avoid similar characters (e.g. i, l, 1, L, o, 0, O)</span>
            </label>
          </div>

          <div class="action-row">
            <button id="generatePassword" type="button" class="btn btn-primary">Generate Password</button>
          </div>
          <span id="generatorStatus" role="status" aria-live="polite" class="status-message"></span>
        </div>
        <div class="generated-output">
          <label for="generatedResult">Generated password</label>
          <div class="input-with-actions">
            <input type="text" id="generatedResult" readonly />
            <button id="copyGenerated" class="icon-btn" type="button" aria-label="Copy generated password">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"
                stroke-linejoin="round">
                <rect x="9" y="9" width="13" height="13" rx="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
              </svg>
            </button>
            <button id="useForTest" class="icon-btn" type="button" aria-label="Use in tester">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"
                stroke-linejoin="round">
                <line x1="5" y1="12" x2="19" y2="12"></line>
                <polyline points="12 5 19 12 12 19"></polyline>
              </svg>
            </button>
          </div>
          <div class="generated-actions">
            <button id="saveGenerated" type="button" class="ghost">Save to vault</button>
          </div>
        </div>

      </section>

      <section id="view-vault" class="view" role="tabpanel" aria-labelledby="tab-vault">
        <div id="vaultLocked" class="panel">
          <div class="panel-headline">
            <div>
              <p class="eyebrow">Secure vault</p>
              <h2>Encrypted locally</h2>
            </div>
            <button type="button" class="pill-toggle" data-toggle-target="vaultLockedDescription"
              data-labels="Details|Hide" aria-expanded="false"></button>
          </div>
          <p id="vaultLockedDescription" class="panel-description" hidden>
            Unlock with your master password to manage stored credentials.
          </p>
          <div id="createMaster" class="vault-state hidden">
            <div class="form-intro">
              <h3>Create a master password</h3>
              <p class="modal-lead">Encrypt your vault before syncing. This password never leaves your device.</p>
            </div>
            <form id="createMasterForm" class="form-stack">
              <div class="field-group">
                <label for="newMaster">Master password</label>
                <div class="input-wrapper">
                  <input type="password" id="newMaster" autocomplete="new-password" required
                    placeholder="Choose a strong password" />
                </div>
              </div>
              <div class="field-group">
                <label for="confirmMaster">Confirm password</label>
                <div class="input-wrapper">
                  <input type="password" id="confirmMaster" autocomplete="new-password" required
                    placeholder="Repeat password" />
                </div>
              </div>
              <button type="submit" class="btn btn-primary">Create vault</button>
            </form>
          </div>
          <div id="unlockMaster" class="vault-state">
            <div class="form-intro">
              <h3>Unlock your vault</h3>
              <p class="modal-lead">Enter your master password to access your credentials.</p>
            </div>
            <form id="unlockForm" class="form-stack">
              <div class="field-group">
                <label for="vaultPassphrase">Master password</label>
                <div class="input-wrapper">
                  <input type="password" id="vaultPassphrase" autocomplete="current-password" required
                    placeholder="Enter password" />
                </div>
              </div>
              <button type="submit" class="btn btn-primary">Unlock vault</button>
            </form>
          </div>
        </div>

        <div id="vaultUnlocked" class="panel hidden">
          <div class="hero-section">
            <h2>Your Vault</h2>
            <p class="subtitle">Manage your secure credentials.</p>
          </div>

          <div class="vault-toolbar">
            <div class="toolbar-left">
              <div class="search-wrapper">
                <button id="searchToggle" type="button" class="icon-btn" title="Search" aria-label="Toggle search">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"></circle>
                    <path d="m21 21-4.35-4.35"></path>
                  </svg>
                </button>
                <div class="search-container">
                  <input type="search" id="vaultSearch" placeholder="Search..." aria-label="Search" />
                </div>
              </div>
            </div>
            <div class="toolbar-right">
              <button id="addEntry" type="button" class="icon-btn" title="Add Entry">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                  stroke-linejoin="round">
                  <line x1="12" y1="5" x2="12" y2="19"></line>
                  <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
              </button>
              <button id="changeMaster" type="button" class="icon-btn" title="Settings">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                  stroke-linejoin="round">
                  <circle cx="12" cy="12" r="3"></circle>
                  <path
                    d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.08.08a2 2 0 0 1-2.83 2.83l-.08-.08A1.65 1.65 0 0 0 15 19.4a1.65 1.65 0 0 0-1 .33 1.65 1.65 0 0 0-.83 1.49V22a2 2 0 0 1-4 0v-.78a1.65 1.65 0 0 0-.83-1.49 1.65 1.65 0 0 0-1-.33 1.65 1.65 0 0 0-1.82.33l-.08.08a2 2 0 1 1-2.83-2.83l.08-.08A1.65 1.65 0 0 0 4.6 15a1.65 1.65 0 0 0-.33-1 1.65 1.65 0 0 0-1.49-.83H2a2 2 0 0 1 0-4h.78a1.65 1.65 0 0 0 1.49-.83 1.65 1.65 0 0 0 .33-1 1.65 1.65 0 0 0-.33-1.82l-.08-.08a2 2 0 0 1 2.83-2.83l.08.08A1.65 1.65 0 0 0 9 4.6a1.65 1.65 0 0 0 1-.33 1.65 1.65 0 0 0 .83-1.49V2a2 2 0 0 1 4 0v.78a1.65 1.65 0 0 0 .83 1.49 1.65 1.65 0 0 0 1 .33 1.65 1.65 0 0 0 1.82-.33l.08-.08a2 2 0 1 1 2.83 2.83l-.08.08A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 .33 1 1.65 1.65 0 0 0 1.49.83H22a2 2 0 0 1 0 4h-.78a1.65 1.65 0 0 0-1.49.83 1.65 1.65 0 0 0-.33 1Z">
                  </path>
                </svg>
              </button>
              <button id="lockVault" type="button" class="icon-btn" title="Lock vault" aria-label="Lock vault">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"
                  stroke-linejoin="round">
                  <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                  <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                </svg>
              </button>
            </div>
          </div>
          <ul id="vaultList" class="vault-list"></ul>
          <p id="vaultEmpty" class="empty-state hidden">No credentials saved yet.</p>
        </div>
      </section>
    </main>
  </div>


  <div id="settingsPanel" class="settings-panel" aria-hidden="true">
    <div class="settings-surface">
      <div class="settings-header">
        <button id="closeSettings" class="icon-btn" type="button" aria-label="Back to main view">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
            stroke-linejoin="round">
            <line x1="19" y1="12" x2="5" y2="12"></line>
            <polyline points="12 19 5 12 12 5"></polyline>
          </svg>
        </button>
        <div class="settings-title">
          <h2>Settings</h2>
        </div>
        <div class="settings-chip">Live</div>
      </div>

      <div class="settings-overview">
        <div class="pill-stat">
          <p class="label">Theme</p>
          <p class="value">Follows system</p>
        </div>
        <div class="pill-stat">
          <p class="label">Vault</p>
          <p class="value">Local first</p>
        </div>
        <div class="pill-stat">
          <p class="label">Sync</p>
          <p class="value">Chrome profile</p>
        </div>
      </div>

      <div class="settings-content">
        <section class="settings-group">
          <div class="settings-group-header">
            <div>
              <p class="eyebrow">Appearance</p>
              <h3>Theme & accessibility</h3>
              <p class="settings-description">Keep the popup in sync with your OS or force a curated light or dark look.
              </p>
            </div>
            <span class="pill-indicator neutral">Personal</span>
          </div>
          <div class="options-row chip-row">
            <label class="chip-option">
              <input type="radio" name="appearanceTheme" value="system" />
              <span>System</span>
            </label>
            <label class="chip-option">
              <input type="radio" name="appearanceTheme" value="dark" />
              <span>Dark</span>
            </label>
            <label class="chip-option">
              <input type="radio" name="appearanceTheme" value="light" />
              <span>Light</span>
            </label>
          </div>
          <div class="settings-footnote">
            <p>Theme changes apply instantly to the popup, modals and vault screens.</p>
          </div>
        </section>

        <section class="settings-group">
          <div class="settings-group-header">
            <div>
              <p class="eyebrow">Security</p>
              <h3>Auto-lock discipline</h3>
              <p class="settings-description">Control how quickly the vault re-locks when you step away.</p>
            </div>
            <span class="pill-indicator">Recommended</span>
          </div>
          <div class="settings-grid">
            <div class="stack">
              <label for="autoLockRange" class="range-label">Auto-lock timer <span id="autoLockLabel">15
                  min</span></label>
              <input type="range" id="autoLockRange" min="1" max="60" step="1" value="15" />
            </div>
            <div class="callout">
              <h4>Smart lock</h4>
              <p>We only keep the vault unlocked locally. A new session requires your master password again.</p>
            </div>
          </div>
        </section>

        <section class="settings-group">
          <div class="settings-group-header">
            <div>
              <p class="eyebrow">Sync</p>
              <h3>Cloud coordination</h3>
              <p class="settings-description">Use Chrome Sync to keep encrypted vault data aligned across devices.</p>
            </div>
            <span class="pill-indicator neutral">Optional</span>
          </div>
          <div class="settings-grid">
            <label class="switch">
              <input type="checkbox" id="syncToggle" />
              <span class="slider"></span>
              <span class="switch-label">Enable Chrome Sync</span>
            </label>
            <div class="callout muted">
              <h4>Privacy first</h4>
              <p>Only encrypted blobs leave your machine. Sync toggles do not change your master password or local
                vault.</p>
            </div>
          </div>
        </section>
      </div>
    </div>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>
  <div id="modalBackdrop" class="modal-backdrop hidden" aria-hidden="true"></div>

  <div id="entryModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="entryModalTitle">
    <form id="entryForm" class="modal-content">
      <header class="modal-header">
        <button type="button" data-close="entryModal" class="icon-btn" aria-label="Back">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
            stroke-linejoin="round">
            <line x1="19" y1="12" x2="5" y2="12"></line>
            <polyline points="12 19 5 12 12 5"></polyline>
          </svg>
        </button>
        <div class="modal-header-title">
          <h3 id="entryModalTitle">Save credential</h3>
        </div>
      </header>
      <div class="form-stack">
        <div class="form-intro">
          <p class="eyebrow">Vault entry</p>
          <p class="modal-lead">Only encrypted data leaves this device. Capture the essentials with clarity.</p>
          <div class="modal-chips">
            <span class="pill-indicator neutral">AES-256</span>
            <span class="pill-indicator">Zero-knowledge</span>
          </div>
        </div>
        <div class="field-group">
          <label for="entrySite">Website or app</label>
          <div class="input-wrapper">
            <input type="text" id="entrySite" placeholder="e.g. https://google.com" required />
          </div>
          <span class="hint">The URL or name of the service.</span>
        </div>

        <div class="field-group">
          <label for="entryUsername">Username</label>
          <div class="input-wrapper">
            <input type="text" id="entryUsername" placeholder="e.g. user@email.com" />
          </div>
        </div>

        <div class="field-group">
          <label for="entryPassword">Password</label>
          <div class="input-wrapper">
            <input type="text" id="entryPassword" class="font-mono" required />
          </div>
        </div>

        <div class="field-group">
          <label for="entryNotes">Notes <span class="optional">(Optional)</span></label>
          <div class="input-wrapper">
            <textarea id="entryNotes" rows="3" placeholder="Security questions, PINs, or other details..."></textarea>
          </div>
        </div>

        <div class="modal-actions">
          <button type="button" data-close="entryModal" class="secondary">Cancel</button>
          <button type="submit" class="primary">Save credential</button>
        </div>
      </div>
    </form>
  </div>

  <div id="masterModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="masterModalTitle">
    <form id="masterForm" class="modal-content">
      <header class="modal-header">
        <button type="button" data-close="masterModal" class="icon-btn" aria-label="Back">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
            stroke-linejoin="round">
            <line x1="19" y1="12" x2="5" y2="12"></line>
            <polyline points="12 19 5 12 12 5"></polyline>
          </svg>
        </button>
        <div class="modal-header-title">
          <h3 id="masterModalTitle">Change master password</h3>
        </div>
      </header>
      <div class="form-stack">
        <div class="form-intro">
          <p class="eyebrow">Security</p>
          <p class="modal-lead">We will re-encrypt the vault with your new master password immediately.</p>
        </div>
        <div class="field-group">
          <label for="currentMaster">Current master password</label>
          <div class="input-wrapper">
            <input type="password" id="currentMaster" autocomplete="current-password" required />
          </div>
        </div>

        <div class="field-group">
          <label for="nextMaster">New master password</label>
          <div class="input-wrapper">
            <input type="password" id="nextMaster" autocomplete="new-password" required />
          </div>
        </div>

        <div class="field-group">
          <label for="confirmNextMaster">Confirm new master password</label>
          <div class="input-wrapper">
            <input type="password" id="confirmNextMaster" autocomplete="new-password" required />
          </div>
        </div>

        <div class="modal-actions">
          <button type="button" data-close="masterModal" class="secondary">Cancel</button>
          <button type="submit" class="primary">Update master password</button>
        </div>
      </div>
    </form>
  </div>

  <script type="module" src="popup.js"></script>
</body>

</html>